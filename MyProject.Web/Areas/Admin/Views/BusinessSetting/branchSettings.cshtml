@model IEnumerable<MyProject.Data.BusinessBranchSetting>
@{
    ViewBag.Title = "Branch Settings";
    Layout = null;
}

<style>
    .list-repeat {
        box-shadow: 0px 0px 7px 1px #e0dede;
    }
</style>

<div class="modal-header">
    <h5 class="modal-title">Business Branch Settings</h5>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <i aria-hidden="true" class="ki ki-close"></i>
    </button>
</div>
<div class="modal-body">

    <div id="kt_repeater_1">
        <div class="form-group row">
            <div data-repeater-list="" class="col-md-12" id="repeatList">

                @Html.AntiForgeryToken()
                <!--Lists Create-->

                @if (Model.Count() != 0)
                {
                    foreach (var item in Model)
                    {
                        <div data-repeater-item class="row form-group list-repeat align-items-center m-0 mt-5 mb-5 p-8 rounded">
                            <div hidden>
                                <input type="number" class="form-control ID" value="@item.ID" />
                            </div>
                            @*<div hidden>
                                <input type="number" class="form-control ImageCheck" value="@item.Image" />
                            </div>*@
                            <div class="col-md-12">
                                <h4 class="card-label BranchName">
                                    @item.Name
                                </h4>

                                <hr />
                            </div>
                            <div class="col-md-12 col-sm-12 text-center" hidden>
                                <div class="flex-shrink-0 mr-7">
                                    <div class="symbol symbol-50 symbol-lg-120">
                                        <input type="number" class="form-control BusinessSettingID" value="@item.BusinessSettingID" />
                                    </div>
                                </div>
                            </div>

                            @*<div class="col-md-12 col-sm-12 text-center show-image-and-input" hidden onclick="showimageandinput(this, @item.ID)">
                                    <div class="flex-shrink-0 mr-7">
                                        <div class="symbol symbol-50 symbol-lg-120">
                                            <img alt="Pic" class="show-image-input" src="">
                                        </div>
                                    </div>
                                </div>*@
                            @*@if (!string.IsNullOrEmpty(item.Image))
                            {
                                <div class="col-md-12 col-sm-12 text-center hide-image-and-input img-div">
                                    <div class="flex-shrink-0 mr-7">
                                        <div class="symbol symbol-50 symbol-lg-120">
                                            <img alt="Pic" class="show-image" src="@item.Image">
                                        </div>
                                    </div>
                                </div>
                            }
                            @if (true)
                            {
                                <div class="col-md-12 image-input">
                                    <div class="form-group">
                                        <label class="control-label">Image</label>
                                        <div class="input-group">

                                            <input type="file" name="file" id="Image" accept=".png, .jpg, .jpeg" class="img-upload Image" value="@item.Image" data-width="400" data-height="600" data-size="500" disabled />
                                            <div class="input-group-append">
                                                <span class="input-group-text">
                                                    <i class="flaticon-upload"></i>
                                                </span>
                                            </div>
                                        </div>
                                        <span class="form-text text-muted">Image dimensions should be 400 x 600 pixels and Image size must be less than 500 kb</span>
                                    </div>
                                </div>
                            }*@
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="control-label">Branch Name</label>
                                    <div class="input-group mb-2">
                                        <input type="text" class="form-control Name" value="@item.Name" placeholder="Enter branch name here ..." disabled />
                                        <div class="input-group-append"><span class="input-group-text"><i class="fa fa-comment-alt "></i></span></div>
                                    </div>
                                </div>
                            </div>
                            @*<div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Branch Name(Ar)</label>
                                    <div class="input-group mb-2">
                                        <input type="text" class="form-control NameAr" value="@item.NameAr" placeholder="Enter branch name(Ar) here ..." disabled />
                                        <div class="input-group-append"><span class="input-group-text"><i class="fa fa-comment-alt "></i></span></div>
                                    </div>
                                </div>
                            </div>*@
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Contact 1</label>
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">+92</span>
                                        </div>
                                        @{ var cntct = item.Contact != null ? item.Contact.Substring(2, item.Contact.Length - 2) : "0";
                                            var cntct2 = item.Contact2 != null ? item.Contact2.Substring(2, item.Contact2.Length - 2) : "0";
                                        }
                                        <input type="number" onblur="validate(this.value,this)" class="form-control Contact" value="@cntct" placeholder="Enter contact 1 here ..." maxLength = "10" disabled />
                                        <div class="input-group-append"><span class="input-group-text"><i class="fa fa-phone"></i></span></div>
                                    </div>
                                    <span class="form-text text-danger confPassError" style="font-size: 9px;"></span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Contact 2</label>
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">+92</span>
                                        </div>
                                        <input type="number" onblur="validate(this.value,this)" class="form-control Contact2" value="@cntct2" placeholder="Enter contact 2 here ..." maxLength = "10" disabled />
                                        <div class="input-group-append"><span class="input-group-text"><i class="fa fa-phone"></i></span></div>
                                    </div>
                                    <span class="form-text text-danger confPassError" style="font-size: 9px;"></span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Fax No</label>
                                    <div class="input-group mb-2">
                                        <input type="tel" class="form-control Fax" value="@item.Fax" placeholder="Enter fax here ..." disabled />
                                        <div class="input-group-append"><span class="input-group-text"><i class="fa fa-fax"></i></span></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Email</label>
                                    <div class="input-group mb-2">
                                        <input type="text" class="form-control Email" value="@item.Email" placeholder="Enter email here ..." disabled />
                                        <div class="input-group-append"><span class="input-group-text"><i class="fa fa-envelope"></i></span></div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="control-label">Address</label>
                                    <div class="input-group mb-2">
                                        <textarea class="form-control StreetAddress" rows="4" placeholder="Enter street address here..." disabled>@item.StreetAddress</textarea>
                                        <div class="input-group-append"><span class="input-group-text"><i class="fa fa-home"></i></span></div>
                                    </div>
                                </div>
                            </div>
                            @*<div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Address(Ar)</label>
                                    <div class="input-group mb-2">
                                        <textarea class="form-control StreetAddressAr" rows="4" placeholder="Enter street address(Ar) here..." disabled>@item.StreetAddressAr</textarea>
                                        <div class="input-group-append"><span class="input-group-text"><i class="fa fa-home"></i></span></div>
                                    </div>
                                </div>
                            </div>*@
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Map IFrame</label>
                                    <div class="input-group mb-2">
                                        <textarea class="form-control MapIframe" rows="4" placeholder="Enter map iframe here..." disabled>@item.MapIframe</textarea>
                                        <div class="input-group-append"><span class="input-group-text"><i class="fa fa-map-marker"></i></span></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Opening Hours</label>
                                    <div class="input-group mb-2">
                                        <textarea class="form-control Days" rows="4" placeholder="Enter opening hours here..." disabled>@item.WorkingDays</textarea>
                                        <div class="input-group-append"><span class="input-group-text"><i class="fa fa-calendar-alt"></i></span></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 text-right">
                                <div class="card-toolbar">
                                    <button type="button" class="btn btn-danger font-weight-bolder font-weight-bolder Delete mr-2" onclick="Delete(this, @item.ID)">
                                        <i class="la la-trash-o"></i>Delete
                                    </button>
                                    <button type="button" class="btn btn-primary font-weight-bolder edit-profile" onclick="Change(this, @item.ID)">
                                        <i class="fa fa-pen icon-sm"></i> Change
                                    </button>
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-danger font-weight-bolder edit-cancel" style="display:none;" onclick="Cancel(this, @item.ID)">
                                            <i class="ki ki-close icon-sm"></i> Cancel
                                        </button>
                                        <button type="submit" class="btn btn-success font-weight-bolder save-changes" style="display:none;" onclick="Save(this, @item.ID)">
                                            <i class="ki ki-check icon-sm"></i> Save Changes
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                }
                else
                {
                    <div data-repeater-item class="row form-group list-repeat align-items-center m-0 mt-5 mb-5 p-8 rounded">

                        <div hidden>
                            <input type="number" class="form-control hidden ID" value="" hidden />
                        </div>
                        <div class="col-md-12 col-sm-12 text-center" hidden>
                            <div class="flex-shrink-0 mr-7">
                                <div class="symbol symbol-50 symbol-lg-120">
                                    <input type="number" class="form-control  BusinessSettingID" value="@ViewBag.BusinessSettingID" />
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-sm-12 text-center">
                            <div class="flex-shrink-0 mr-7">
                                <div class="symbol symbol-50 symbol-lg-120">
                                    <img alt="Pic" class="show-image" src="">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="control-label">Image</label>
                                <div class="input-group">
                                    <input type="file" name="file" id="Image" accept=".png, .jpg, .jpeg" class="img-upload Image" value="" data-width="400" data-height="600" data-size="500" disabled />
                                    <div class="input-group-append">
                                        <span class="input-group-text">
                                            <i class="flaticon-upload"></i>
                                        </span>
                                    </div>
                                </div>
                                <span class="form-text text-muted">Image dimensions should be 400 x 600 pixels and Image size must be less than 500 kb</span>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <h4 class="card-label BranchName">
                                Branch Name
                            </h4>
                            <hr />
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="control-label">Branch Name</label>
                                <div class="input-group mb-2">
                                    <input type="text" class="form-control Name" value="" placeholder="Enter branch name here ..." disabled />
                                    <div class="input-group-append"><span class="input-group-text"><i class="fa fa-comment-alt "></i></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label">Contact 1</label>
                                <div class="input-group mb-2">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">+92</span>
                                    </div>
                                    <input type="number" onblur="validate(this.value,this)" class="form-control Contact" value="" placeholder="Enter contact 1 here ..." disabled />
                                    <div class="input-group-append"><span class="input-group-text"><i class="fa fa-phone"></i></span></div>
                                </div>
                                <span class="form-text text-danger confPassError" style="font-size: 9px;"></span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label">Contact 2</label>
                                <div class="input-group mb-2">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">+92</span>
                                    </div>
                                    <input type="number" onblur="validate(this.value,this)" class="form-control Contact2" value="" placeholder="Enter contact 2 here ..." disabled />
                                    <div class="input-group-append"><span class="input-group-text"><i class="fa fa-phone"></i></span></div>
                                </div>
                                <span class="form-text text-danger confPassError" style="font-size: 9px;"></span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label">Fax No</label>
                                <div class="input-group mb-2">
                                    <input type="tel" class="form-control Fax" value="" placeholder="Enter fax here ..." disabled />
                                    <div class="input-group-append"><span class="input-group-text"><i class="fa fa-fax"></i></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label">Email</label>
                                <div class="input-group mb-2">
                                    <input type="email" class="form-control Email" value="" placeholder="Enter email here ..." disabled />
                                    <div class="input-group-append"><span class="input-group-text"><i class="fa fa-envelope"></i></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="control-label">Map IFrame</label>
                                <div class="input-group mb-2">
                                    <textarea class="form-control MapIframe" rows="6" placeholder="Enter map iframe here..." disabled></textarea>
                                    <div class="input-group-append"><span class="input-group-text"><i class="fa fa-map-marker"></i></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="control-label">Address</label>
                                <div class="input-group mb-2">
                                    <textarea class="form-control StreetAddress" rows="6" placeholder="Enter street address here..." disabled></textarea>
                                    <div class="input-group-append"><span class="input-group-text"><i class="fa fa-home"></i></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="control-label">Opening Hours</label>
                                <div class="input-group mb-2">
                                    <textarea class="form-control Days" rows="6" placeholder="Enter opening hours here..." disabled></textarea>
                                    <div class="input-group-append"><span class="input-group-text"><i class="fa fa-calendar-alt"></i></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 text-right">
                            <div class="card-toolbar">
                                <button type="button" class="btn btn-danger font-weight-bolder font-weight-bolder Delete mr-2" onclick="Delete(this, 0)">
                                    <i class="la la-trash-o"></i>Delete
                                </button>
                                <button type="button" class="btn btn-primary font-weight-bolder edit-profile" onclick="Change(this, 0)">
                                    <i class="fa fa-pen icon-sm"></i> Change
                                </button>
                                <div class="btn-group">
                                    <button type="button" class="btn btn-danger font-weight-bolder edit-cancel" style="display:none;" onclick="Cancel(this, 0)">
                                        <i class="ki ki-close icon-sm"></i> Cancel
                                    </button>
                                    <button type="submit" class="btn btn-success font-weight-bolder save-changes" style="display:none;" onclick="Save(this, 0)">
                                        <i class="ki ki-check icon-sm"></i> Save Changes
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                }
                <!--Lists Create-->
            </div>
        </div>
        <div class="form-group row">
            @*<label class="col-lg-2 col-form-label text-right"></label>*@
            <div class="col-lg-12">
                <a href="javascript:;" data-repeater-create="" class="btn btn-sm font-weight-bolder btn-light-primary">
                    <i class="la la-plus"></i>Add Branch
                </a>
            </div>
        </div>
    </div>

</div>
<div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
</div>


<script>


    var BusinessSettingID = @ViewBag.BusinessSettingID;
    function validate(v, dom) {



        if (v.length < 9) {
            $($(dom).next()[0].parentElement.parentElement).find('.confPassError').text('Please enter 9 digits!')
            $('.save-changes').prop('disabled', true)
        }
        else if (v.length == 9) {
            $('.confPassError').text('');
            $('.save-changes').prop('disabled', false)
        }
        else {
            dom.value = v.slice(0, 9);
        }
    }
</script>
<!--end::Row-->
<script src="~/Assets/Admin/js/pages/crud/forms/widgets/form-repeater.js"></script>
<!--begin::Page Scripts(used by this page)-->

<script src="@Url.ContentVersioned("~/Assets/Admin/js/admin/businesssetting/branch.js")"></script>
<!--end::Page Scripts-->
